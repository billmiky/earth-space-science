{
  "hash": "6fac2814142e3601900a2149835e5a99",
  "result": {
    "engine": "jupyter",
    "markdown": "# Moon Phases, Eclipses, and Tides\n\n## Essential Question\n\n> How do the motions of Earth, Moon, and Sun create predictable patterns we observe?\n\n## Moon Phases\n\nThe Moon's appearance changes throughout its 29.5-day cycle as we see different portions of its illuminated half.\n\n::: {#cell-fig-moon-phases .cell execution_count=1}\n``` {.python .cell-code code-fold=\"true\"}\nimport matplotlib.pyplot as plt\nimport matplotlib.patches as mpatches\nimport numpy as np\n\nfig, axes = plt.subplots(2, 4, figsize=(14, 7))\naxes = axes.flatten()\n\nphases = [\n    ('New Moon', 0),\n    ('Waxing Crescent', 0.125),\n    ('First Quarter', 0.25),\n    ('Waxing Gibbous', 0.375),\n    ('Full Moon', 0.5),\n    ('Waning Gibbous', 0.625),\n    ('Third Quarter', 0.75),\n    ('Waning Crescent', 0.875)\n]\n\nfor ax, (name, phase) in zip(axes, phases):\n    ax.set_xlim(-1.5, 1.5)\n    ax.set_ylim(-1.5, 1.5)\n    ax.set_aspect('equal')\n    ax.axis('off')\n    \n    # Draw moon outline\n    circle = plt.Circle((0, 0), 1, fill=False, color='gray', linewidth=2)\n    ax.add_patch(circle)\n    \n    # Draw illuminated portion\n    theta = np.linspace(-np.pi/2, np.pi/2, 100)\n    \n    if phase == 0:  # New Moon\n        ax.add_patch(plt.Circle((0, 0), 1, color='#1a1a2e'))\n    elif phase == 0.5:  # Full Moon\n        ax.add_patch(plt.Circle((0, 0), 1, color='#f5f5dc'))\n    elif phase < 0.5:  # Waxing\n        ax.add_patch(plt.Circle((0, 0), 1, color='#1a1a2e'))\n        illumination = (phase * 4 - 1) if phase > 0.25 else -(1 - phase * 4)\n        x_edge = illumination * np.cos(theta)\n        x_right = np.cos(theta)\n        y = np.sin(theta)\n        ax.fill(np.concatenate([x_right, x_edge[::-1]]), \n                np.concatenate([y, y[::-1]]), color='#f5f5dc')\n    else:  # Waning\n        ax.add_patch(plt.Circle((0, 0), 1, color='#f5f5dc'))\n        illumination = ((phase - 0.5) * 4 - 1) if phase > 0.75 else -(1 - (phase - 0.5) * 4)\n        x_edge = illumination * np.cos(theta)\n        x_right = np.cos(theta)\n        y = np.sin(theta)\n        ax.fill(np.concatenate([x_right, x_edge[::-1]]), \n                np.concatenate([y, y[::-1]]), color='#1a1a2e')\n    \n    ax.set_title(name, fontsize=11, fontweight='bold')\n\nplt.suptitle('Phases of the Moon', fontsize=16, fontweight='bold', y=1.02)\nplt.tight_layout()\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![The eight major phases of the Moon](01-moon-phases-tides_files/figure-html/fig-moon-phases-output-1.png){#fig-moon-phases}\n:::\n:::\n\n\n## Interactive: Moon Phase Simulator\n\n\n```{ojs}\n//| echo: false\n\nviewof dayOfCycle = Inputs.range([0, 29.5], {\n  value: 0,\n  step: 0.5,\n  label: \"Day of Lunar Cycle\"\n})\n\nphase = dayOfCycle / 29.5\nphaseName = phase < 0.03 ? \"New Moon\" :\n            phase < 0.22 ? \"Waxing Crescent\" :\n            phase < 0.28 ? \"First Quarter\" :\n            phase < 0.47 ? \"Waxing Gibbous\" :\n            phase < 0.53 ? \"Full Moon\" :\n            phase < 0.72 ? \"Waning Gibbous\" :\n            phase < 0.78 ? \"Third Quarter\" :\n            phase < 0.97 ? \"Waning Crescent\" : \"New Moon\"\n\nillumination = phase < 0.5 ? phase * 2 * 100 : (1 - phase) * 2 * 100\n\nmoonrise = phase < 0.5 ? \n           `${Math.floor(6 + phase * 24)}:${Math.floor((phase * 24 % 1) * 60).toString().padStart(2, '0')}` :\n           `${Math.floor(18 + (phase - 0.5) * 24) % 24}:${Math.floor(((phase - 0.5) * 24 % 1) * 60).toString().padStart(2, '0')}`\n```\n\n```{ojs}\n//| echo: false\n\nhtml`\n<div class=\"interactive-container\" style=\"text-align: center;\">\n  <h3>${phaseName}</h3>\n  \n  <svg width=\"200\" height=\"200\" style=\"display: block; margin: 0 auto;\">\n    <circle cx=\"100\" cy=\"100\" r=\"80\" fill=\"#1a1a2e\" stroke=\"gray\" stroke-width=\"2\"/>\n    ${phase === 0 ? '' : phase < 0.5 ?\n      `<path d=\"M 100 20 A 80 80 0 0 1 100 180 A ${80 * Math.abs(1 - phase * 4)} 80 0 ${phase > 0.25 ? 1 : 0} ${phase > 0.25 ? 1 : 0} 100 20\" fill=\"#f5f5dc\"/>` :\n      `<path d=\"M 100 20 A 80 80 0 0 0 100 180 A ${80 * Math.abs(1 - (phase - 0.5) * 4)} 80 0 ${phase > 0.75 ? 0 : 1} ${phase > 0.75 ? 0 : 1} 100 20\" fill=\"#f5f5dc\"/>`\n    }\n  </svg>\n  \n  <table style=\"margin: 15px auto; text-align: left;\">\n    <tr><td><strong>Day of Cycle:</strong></td><td>${dayOfCycle.toFixed(1)} / 29.5</td></tr>\n    <tr><td><strong>Illumination:</strong></td><td>${illumination.toFixed(0)}%</td></tr>\n    <tr><td><strong>Approximate Moonrise:</strong></td><td>${moonrise}</td></tr>\n  </table>\n</div>\n`\n```\n\n\n## Eclipses\n\n**Eclipses** occur when the Sun, Earth, and Moon align precisely\n\n",
    "supporting": [
      "01-moon-phases-tides_files"
    ],
    "filters": [],
    "includes": {}
  }
}