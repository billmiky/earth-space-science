---
title: "Unit 5: Blizzards 5E"
subtitle: "How do severe winter storms form, and could they become worse in the future?"
author: "Earth & Space Science"
format:
  html:
    toc: false
    toc-depth: 3
    number-sections: true
    code-fold: true
execute:
  echo: true
  warning: false
---

```{=html}
<style>
@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@700&family=Inter:wght@400;600;800&display=swap');

.engage-box { 
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
  color: white;
  padding: 25px; 
  margin: 20px 0; 
  border-radius: 15px;
  box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
  border: none;
}
.engage-box h2 { font-family: 'Space Grotesk', sans-serif; font-size: 2em; margin-top: 0; }

.explore-box { 
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); 
  color: white;
  padding: 25px; 
  margin: 20px 0; 
  border-radius: 15px;
  box-shadow: 0 10px 30px rgba(240, 147, 251, 0.3);
}

.explain-box { 
  background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); 
  color: #1a1a1a;
  padding: 25px; 
  margin: 20px 0; 
  border-radius: 15px;
  box-shadow: 0 10px 30px rgba(79, 172, 254, 0.3);
}

.elaborate-box { 
  background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); 
  color: #1a1a1a;
  padding: 25px; 
  margin: 20px 0; 
  border-radius: 15px;
  box-shadow: 0 10px 30px rgba(67, 233, 123, 0.3);
}

.evaluate-box { 
  background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); 
  color: #1a1a1a;
  padding: 25px; 
  margin: 20px 0; 
  border-radius: 15px;
  box-shadow: 0 10px 30px rgba(250, 112, 154, 0.3);
}

.check-understanding { 
  background: linear-gradient(to right, #667eea, #764ba2);
  color: white;
  padding: 20px; 
  margin: 20px 0;
  border-radius: 12px;
  border-left: 6px solid #fff;
}

.key-idea { 
  background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
  padding: 20px; 
  margin: 20px 0;
  border-radius: 12px;
  border-left: 8px solid #ff6b6b;
  font-size: 1.1em;
}

.lab-activity { 
  background: linear-gradient(to bottom, #ffeaa7, #fdcb6e);
  border: 4px solid #e17055; 
  padding: 25px; 
  margin: 25px 0; 
  border-radius: 15px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}

.quiz-section { 
  background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
  padding: 25px; 
  margin: 25px 0; 
  border-radius: 15px;
  border: 4px dashed #ff6b6b;
}

.pe-badge { 
  display: inline-block; 
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white; 
  padding: 8px 16px; 
  border-radius: 20px; 
  font-size: 13px; 
  font-weight: 800;
  margin: 5px;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.big-question {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 2.5em;
  font-weight: 800;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin: 30px 0 20px 0;
  text-align: center;
  animation: slideIn 0.8s ease-out;
}

@keyframes slideIn {
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}

.mind-blown {
  background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
  color: white;
  padding: 20px;
  margin: 20px 0;
  border-radius: 15px;
  font-size: 1.3em;
  font-weight: 700;
  text-align: center;
  box-shadow: 0 10px 25px rgba(52, 152, 219, 0.4);
}

.student-task {
  background: #fff3e0;
  border-left: 5px solid #ff9800;
  padding: 20px;
  margin: 15px 0;
  border-radius: 0 10px 10px 0;
}

.weather-map-note {
  background: linear-gradient(135deg, #dfe6e9 0%, #b2bec3 100%);
  padding: 20px;
  margin: 15px 0;
  border-radius: 12px;
  border-left: 6px solid #2d3436;
}

h1 { 
  font-family: 'Space Grotesk', sans-serif !important;
  font-weight: 800 !important;
  font-size: 2.8em !important;
  margin-top: 40px !important;
}

h2 { 
  font-family: 'Space Grotesk', sans-serif !important;
  font-weight: 700 !important;
  color: #667eea !important;
}
</style>
```

<span class="pe-badge">HS-ESS2-8</span> <span class="pe-badge">Time: 7‚Äì13 Days</span>

<div class="big-question">üå®Ô∏è Winter Storm Jonas: Anatomy of a Blizzard üå®Ô∏è</div>

# Engage: The Investigative Phenomenon

::: {.engage-box}
## ‚ùÑÔ∏è Winter Storm Jonas (January 22‚Äì24, 2016)

<div style="font-size: 1.3em; font-weight: 700; text-align: center; margin: 20px 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
Winter storm Jonas produced strong enough winds and enough snow to cause significant disruptions to society, damage to property, and harm to human life.
</div>

**Quick Facts:**

- üìè Up to **40 inches** of snow in parts of West Virginia
- üí® Wind gusts exceeding **60 mph** along the coast
- üèôÔ∏è New York City received **27.5 inches** ‚Äî near-record snowfall
- ‚ö° Over **300,000** power outages across the Mid-Atlantic
- üí∞ Estimated **$3 billion** in damages
- üò¢ At least **55 deaths** attributed to the storm

### ü§î Driving Questions:
- What causes the **wind** associated with a blizzard?
- What causes the **snow and precipitation** during a storm like this?
- Could storms like Jonas become more common or more intense?
:::

::: {.student-task}
### üìù Notice & Wonder

Before we dive into the science, take 3 minutes to write:

1. What do you **notice** about Winter Storm Jonas?
2. What do you **wonder** about how storms like this form?
3. Have you personally experienced a storm like this? What was it like?
:::

# Explore: What Causes Wind?

::: {.explore-box}
## üî¨ Investigation: Pressure & Wind

Wind isn't random ‚Äî it has a **cause**. In this section, you'll build a model of what creates wind and why it blows in specific directions.
:::

## The Wind Machine: Pressure Differences

Wind is caused by **differences in air pressure**. Air always moves from areas of high pressure toward areas of low pressure. The greater the pressure difference, the stronger the wind.

But what causes pressure differences? **Uneven heating** of Earth's surface.

```{ojs}
//| echo: false
Plot = require("@observablehq/plot")
d3 = require("d3@7")
```

```{ojs}
//| echo: false
// Interactive pressure-wind model
viewof surfaceTemp = Inputs.range([250, 320], {label: "Surface Temperature (K)", step: 5, value: 290})
```

```{ojs}
//| echo: false
viewof neighborTemp = Inputs.range([250, 320], {label: "Neighboring Region Temp (K)", step: 5, value: 270})
```

```{ojs}
//| echo: false
{
  const width = 700;
  const height = 350;
  const svg = d3.create("svg").attr("width", width).attr("height", height).attr("viewBox", `0 0 ${width} ${height}`);

  // Background
  svg.append("rect").attr("width", width).attr("height", height).attr("fill", "#f0f4ff").attr("rx", 10);

  // Ground
  svg.append("rect").attr("x", 0).attr("y", 280).attr("width", width).attr("height", 70).attr("fill", "#8B7355");

  // Left region (warmer)
  const leftColor = d3.interpolateRdBu(1 - (surfaceTemp - 250) / 70);
  svg.append("rect").attr("x", 0).attr("y", 280).attr("width", 350).attr("height", 70).attr("fill", leftColor).attr("opacity", 0.7);
  svg.append("text").attr("x", 175).attr("y", 310).attr("text-anchor", "middle").attr("fill", "white").attr("font-weight", "bold").text(`${surfaceTemp}K`);

  // Right region (cooler)
  const rightColor = d3.interpolateRdBu(1 - (neighborTemp - 250) / 70);
  svg.append("rect").attr("x", 350).attr("y", 280).attr("width", 350).attr("height", 70).attr("fill", rightColor).attr("opacity", 0.7);
  svg.append("text").attr("x", 525).attr("y", 310).attr("text-anchor", "middle").attr("fill", "white").attr("font-weight", "bold").text(`${neighborTemp}K`);

  // Pressure calculation (simplified: warmer = lower pressure at surface)
  const leftPressure = 1013 - (surfaceTemp - 270) * 0.5;
  const rightPressure = 1013 - (neighborTemp - 270) * 0.5;
  const pressureDiff = rightPressure - leftPressure;
  const windSpeed = Math.abs(pressureDiff) * 1.5;

  // Pressure labels
  svg.append("text").attr("x", 175).attr("y", 40).attr("text-anchor", "middle").attr("font-size", 16).attr("font-weight", "bold")
    .text(`P = ${leftPressure.toFixed(0)} mb`);
  svg.append("text").attr("x", 175).attr("y", 60).attr("text-anchor", "middle").attr("font-size", 12)
    .text(leftPressure < rightPressure ? "üî¥ LOW PRESSURE" : "üîµ HIGH PRESSURE");

  svg.append("text").attr("x", 525).attr("y", 40).attr("text-anchor", "middle").attr("font-size", 16).attr("font-weight", "bold")
    .text(`P = ${rightPressure.toFixed(0)} mb`);
  svg.append("text").attr("x", 525).attr("y", 60).attr("text-anchor", "middle").attr("font-size", 12)
    .text(rightPressure < leftPressure ? "üî¥ LOW PRESSURE" : "üîµ HIGH PRESSURE");

  // Rising/sinking air
  if (surfaceTemp > neighborTemp) {
    // Warm air rises on left
    for (let i = 0; i < 4; i++) {
      svg.append("line")
        .attr("x1", 120 + i * 35).attr("y1", 260).attr("x2", 120 + i * 35).attr("y2", 100)
        .attr("stroke", "#e74c3c").attr("stroke-width", 2).attr("marker-end", "url(#arrowRed)");
    }
    svg.append("text").attr("x", 175).attr("y", 90).attr("text-anchor", "middle").attr("font-size", 11).attr("fill", "#e74c3c").text("‚Üë Warm air RISES");
    // Cold air sinks on right
    for (let i = 0; i < 4; i++) {
      svg.append("line")
        .attr("x1", 470 + i * 35).attr("y1", 100).attr("x2", 470 + i * 35).attr("y2", 260)
        .attr("stroke", "#3498db").attr("stroke-width", 2).attr("marker-end", "url(#arrowBlue)");
    }
    svg.append("text").attr("x", 525).attr("y", 90).attr("text-anchor", "middle").attr("font-size", 11).attr("fill", "#3498db").text("‚Üì Cool air SINKS");
  } else if (neighborTemp > surfaceTemp) {
    for (let i = 0; i < 4; i++) {
      svg.append("line")
        .attr("x1", 470 + i * 35).attr("y1", 260).attr("x2", 470 + i * 35).attr("y2", 100)
        .attr("stroke", "#e74c3c").attr("stroke-width", 2);
    }
    svg.append("text").attr("x", 525).attr("y", 90).attr("text-anchor", "middle").attr("font-size", 11).attr("fill", "#e74c3c").text("‚Üë Warm air RISES");
    for (let i = 0; i < 4; i++) {
      svg.append("line")
        .attr("x1", 120 + i * 35).attr("y1", 100).attr("x2", 120 + i * 35).attr("y2", 260)
        .attr("stroke", "#3498db").attr("stroke-width", 2);
    }
    svg.append("text").attr("x", 175).attr("y", 90).attr("text-anchor", "middle").attr("font-size", 11).attr("fill", "#3498db").text("‚Üì Cool air SINKS");
  }

  // Wind arrow at surface
  if (Math.abs(pressureDiff) > 1) {
    const windDir = pressureDiff > 0 ? 1 : -1;
    const arrowX1 = windDir > 0 ? 450 : 250;
    const arrowX2 = windDir > 0 ? 250 : 450;
    svg.append("line")
      .attr("x1", arrowX1).attr("y1", 270).attr("x2", arrowX2).attr("y2", 270)
      .attr("stroke", "#2ecc71").attr("stroke-width", Math.min(windSpeed / 5, 8));
    svg.append("text").attr("x", 350).attr("y", 255).attr("text-anchor", "middle")
      .attr("font-size", 14).attr("font-weight", "bold").attr("fill", "#2ecc71")
      .text(`WIND ‚Üí ${windSpeed.toFixed(0)} km/h (from HIGH to LOW pressure)`);
  } else {
    svg.append("text").attr("x", 350).attr("y", 260).attr("text-anchor", "middle")
      .attr("font-size", 14).attr("fill", "#999").text("No significant wind (pressures nearly equal)");
  }

  // Defs for arrowheads
  const defs = svg.append("defs");
  defs.append("marker").attr("id", "arrowRed").attr("viewBox", "0 0 10 10").attr("refX", 5).attr("refY", 5)
    .attr("markerWidth", 6).attr("markerHeight", 6).attr("orient", "auto-start-reverse")
    .append("path").attr("d", "M 0 0 L 10 5 L 0 10 z").attr("fill", "#e74c3c");
  defs.append("marker").attr("id", "arrowBlue").attr("viewBox", "0 0 10 10").attr("refX", 5).attr("refY", 5)
    .attr("markerWidth", 6).attr("markerHeight", 6).attr("orient", "auto-start-reverse")
    .append("path").attr("d", "M 0 0 L 10 5 L 0 10 z").attr("fill", "#3498db");

  return svg.node();
}
```

::: {.key-idea}
### üí° Key Concept: What Drives Wind

**Uneven heating ‚Üí Temperature differences ‚Üí Pressure differences ‚Üí WIND**

1. When the Sun heats Earth's surface unevenly, some areas become **warmer** than others.
2. Warm air is **less dense** and rises, creating an area of **low pressure** at the surface.
3. Cool air is **more dense** and sinks, creating an area of **high pressure** at the surface.
4. Air flows from **high pressure ‚Üí low pressure**. This is wind!
5. The greater the pressure difference (the **pressure gradient**), the faster the wind.
:::

::: {.student-task}
### üìù Explore Activity

Use the sliders above to investigate:

1. Set the left region to 310 K and the right to 270 K. What happens to wind speed?
2. Now bring them closer together (290 K and 280 K). How does wind speed change?
3. What temperature combination creates the strongest wind?
4. In your own words, explain why uneven heating causes wind.
:::

## Air Masses: The Building Blocks of Weather

An **air mass** is a large body of air (covering thousands of square miles) that has relatively uniform temperature and humidity. Air masses form when air sits over a region long enough to take on that region's characteristics.

```{ojs}
//| echo: false
{
  const width = 750;
  const height = 420;
  const svg = d3.create("svg").attr("width", width).attr("height", height).attr("viewBox", `0 0 ${width} ${height}`);

  svg.append("rect").attr("width", width).attr("height", height).attr("fill", "#e8f0fe").attr("rx", 12);
  svg.append("text").attr("x", width/2).attr("y", 30).attr("text-anchor", "middle")
    .attr("font-size", 20).attr("font-weight", "bold").attr("fill", "#2c3e50").text("Air Masses Affecting North America");

  // Continental Arctic (cA)
  svg.append("rect").attr("x", 200).attr("y", 45).attr("width", 150).attr("height", 70).attr("fill", "#74b9ff").attr("rx", 8).attr("opacity", 0.8);
  svg.append("text").attr("x", 275).attr("y", 72).attr("text-anchor", "middle").attr("font-weight", "bold").attr("fill", "#2d3436").text("cA");
  svg.append("text").attr("x", 275).attr("y", 90).attr("text-anchor", "middle").attr("font-size", 11).attr("fill", "#2d3436").text("Continental Arctic");
  svg.append("text").attr("x", 275).attr("y", 105).attr("text-anchor", "middle").attr("font-size", 10).attr("fill", "#2d3436").text("‚ùÑÔ∏è Cold & Dry");

  // Continental Polar (cP)
  svg.append("rect").attr("x", 200).attr("y", 125).attr("width", 150).attr("height", 70).attr("fill", "#a29bfe").attr("rx", 8).attr("opacity", 0.8);
  svg.append("text").attr("x", 275).attr("y", 152).attr("text-anchor", "middle").attr("font-weight", "bold").attr("fill", "white").text("cP");
  svg.append("text").attr("x", 275).attr("y", 170).attr("text-anchor", "middle").attr("font-size", 11).attr("fill", "white").text("Continental Polar");
  svg.append("text").attr("x", 275).attr("y", 185).attr("text-anchor", "middle").attr("font-size", 10).attr("fill", "white").text("ü•∂ Cool & Dry");

  // Maritime Polar (mP) - Pacific
  svg.append("rect").attr("x", 30).attr("y", 160).attr("width", 140).attr("height", 70).attr("fill", "#0984e3").attr("rx", 8).attr("opacity", 0.8);
  svg.append("text").attr("x", 100).attr("y", 187).attr("text-anchor", "middle").attr("font-weight", "bold").attr("fill", "white").text("mP (Pacific)");
  svg.append("text").attr("x", 100).attr("y", 205).attr("text-anchor", "middle").attr("font-size", 11).attr("fill", "white").text("üåä Cool & Moist");

  // Maritime Polar (mP) - Atlantic
  svg.append("rect").attr("x", 560).attr("y", 140).attr("width", 150).attr("height", 70).attr("fill", "#0984e3").attr("rx", 8).attr("opacity", 0.8);
  svg.append("text").attr("x", 635).attr("y", 167).attr("text-anchor", "middle").attr("font-weight", "bold").attr("fill", "white").text("mP (Atlantic)");
  svg.append("text").attr("x", 635).attr("y", 185).attr("text-anchor", "middle").attr("font-size", 11).attr("fill", "white").text("üåä Cool & Moist");

  // Continental Tropical (cT)
  svg.append("rect").attr("x", 220).attr("y", 300).attr("width", 150).attr("height", 70).attr("fill", "#fdcb6e").attr("rx", 8).attr("opacity", 0.8);
  svg.append("text").attr("x", 295).attr("y", 327).attr("text-anchor", "middle").attr("font-weight", "bold").attr("fill", "#2d3436").text("cT");
  svg.append("text").attr("x", 295).attr("y", 345).attr("text-anchor", "middle").attr("font-size", 11).attr("fill", "#2d3436").text("Continental Tropical");
  svg.append("text").attr("x", 295).attr("y", 360).attr("text-anchor", "middle").attr("font-size", 10).attr("fill", "#2d3436").text("üèúÔ∏è Hot & Dry");

  // Maritime Tropical (mT) - Pacific
  svg.append("rect").attr("x", 30).attr("y", 310).attr("width", 150).attr("height", 70).attr("fill", "#e17055").attr("rx", 8).attr("opacity", 0.8);
  svg.append("text").attr("x", 105).attr("y", 337).attr("text-anchor", "middle").attr("font-weight", "bold").attr("fill", "white").text("mT (Pacific)");
  svg.append("text").attr("x", 105).attr("y", 355).attr("text-anchor", "middle").attr("font-size", 11).attr("fill", "white").text("üå¥ Warm & Moist");

  // Maritime Tropical (mT) - Gulf/Atlantic
  svg.append("rect").attr("x", 450).attr("y", 310).attr("width", 170).attr("height", 70).attr("fill", "#e17055").attr("rx", 8).attr("opacity", 0.8);
  svg.append("text").attr("x", 535).attr("y", 337).attr("text-anchor", "middle").attr("font-weight", "bold").attr("fill", "white").text("mT (Gulf/Atlantic)");
  svg.append("text").attr("x", 535).attr("y", 355).attr("text-anchor", "middle").attr("font-size", 11).attr("fill", "white").text("üå¥ Warm & Moist");

  // North America outline (simplified)
  svg.append("text").attr("x", 375).attr("y", 250).attr("text-anchor", "middle").attr("font-size", 13).attr("fill", "#636e72")
    .text("üá∫üá∏ North America");

  // Arrows showing movement
  const arrows = [
    {x1: 275, y1: 195, x2: 330, y2: 240, label: ""},
    {x1: 100, y1: 230, x2: 200, y2: 250, label: ""},
    {x1: 635, y1: 210, x2: 500, y2: 240, label: ""},
    {x1: 295, y1: 300, x2: 340, y2: 260, label: ""},
    {x1: 105, y1: 310, x2: 220, y2: 260, label: ""},
    {x1: 535, y1: 310, x2: 420, y2: 260, label: ""}
  ];

  arrows.forEach(a => {
    svg.append("line").attr("x1", a.x1).attr("y1", a.y1).attr("x2", a.x2).attr("y2", a.y2)
      .attr("stroke", "#636e72").attr("stroke-width", 2).attr("stroke-dasharray", "5,3")
      .attr("marker-end", "url(#arrowGray)");
  });

  const defs = svg.append("defs");
  defs.append("marker").attr("id", "arrowGray").attr("viewBox", "0 0 10 10").attr("refX", 5).attr("refY", 5)
    .attr("markerWidth", 6).attr("markerHeight", 6).attr("orient", "auto-start-reverse")
    .append("path").attr("d", "M 0 0 L 10 5 L 0 10 z").attr("fill", "#636e72");

  return svg.node();
}
```

::: {.key-idea}
### üí° Key Concept: Air Mass Classification

Air masses are classified by two properties:

| Symbol | Temperature Source | Humidity Source |
|--------|-------------------|----------------|
| **c** (continental) | Forms over land ‚Üí **dry** | |
| **m** (maritime) | Forms over water ‚Üí **moist** | |
| **A** (Arctic) | Very cold regions | |
| **P** (Polar) | Cool mid-latitude regions | |
| **T** (Tropical) | Warm low-latitude regions | |

So **mT** = **maritime Tropical** = warm and moist (like air from the Gulf of Mexico), and **cP** = **continental Polar** = cool and dry (like air from Canada in winter).
:::

# Explore: Fronts ‚Äî When Air Masses Collide

::: {.explore-box}
## üå™Ô∏è What Happens When Air Masses Meet?

When two air masses with different properties meet, they don't mix easily. The boundary between them is called a **front**. Fronts are where weather happens!
:::

## Types of Fronts

```{ojs}
//| echo: false
viewof frontType = Inputs.select(
  ["Cold Front", "Warm Front", "Stationary Front", "Occluded Front"],
  {label: "Select Front Type:", value: "Cold Front"}
)
```

```{ojs}
//| echo: false
{
  const width = 750;
  const height = 400;
  const svg = d3.create("svg").attr("width", width).attr("height", height).attr("viewBox", `0 0 ${width} ${height}`);

  svg.append("rect").attr("width", width).attr("height", height).attr("fill", "#f8f9fa").attr("rx", 10);

  if (frontType === "Cold Front") {
    // Cold air wedging under warm air
    svg.append("polygon").attr("points", "0,350 750,350 750,250 400,180 0,250").attr("fill", "#74b9ff").attr("opacity", 0.6);
    svg.append("polygon").attr("points", "400,180 750,250 750,100 500,50 400,80").attr("fill", "#ff7675").attr("opacity", 0.5);
    svg.append("line").attr("x1", 200).attr("y1", 235).attr("x2", 550).attr("y2", 170).attr("stroke", "#0984e3").attr("stroke-width", 5);
    // Triangles on cold front line
    for (let x = 250; x < 550; x += 60) {
      const y = 235 - (x - 200) * (65 / 350);
      svg.append("polygon").attr("points", `${x},${y} ${x-8},${y+12} ${x+8},${y+12}`).attr("fill", "#0984e3");
    }
    svg.append("text").attr("x", 150).attr("y", 310).attr("font-size", 18).attr("font-weight", "bold").attr("fill", "#0984e3").text("‚ùÑÔ∏è COLD AIR");
    svg.append("text").attr("x", 150).attr("y", 330).attr("font-size", 13).attr("fill", "#2d3436").text("Dense, advancing quickly");
    svg.append("text").attr("x", 500).attr("y", 120).attr("font-size", 18).attr("font-weight", "bold").attr("fill", "#d63031").text("üî• WARM AIR");
    svg.append("text").attr("x", 500).attr("y", 140).attr("font-size", 13).attr("fill", "#2d3436").text("Pushed up rapidly ‚Üí ‚õàÔ∏è storms");
    svg.append("text").attr("x", 375).attr("y", 380).attr("text-anchor", "middle").attr("font-size", 16).attr("font-weight", "bold")
      .text("COLD FRONT: Cold air pushes under warm air ‚Üí steep slope ‚Üí intense, brief storms");
    // Cloud symbols
    svg.append("text").attr("x", 420).attr("y", 80).attr("font-size", 30).text("üå©Ô∏è");
    svg.append("text").attr("x", 460).attr("y", 60).attr("font-size", 25).text("‚õàÔ∏è");
    svg.append("text").attr("x", 380).attr("y", 100).attr("font-size", 20).text("üåßÔ∏è");
  } else if (frontType === "Warm Front") {
    svg.append("polygon").attr("points", "0,350 750,350 750,250 0,250").attr("fill", "#74b9ff").attr("opacity", 0.6);
    svg.append("polygon").attr("points", "0,250 750,250 750,80 300,50 0,150").attr("fill", "#ff7675").attr("opacity", 0.4);
    svg.append("line").attr("x1", 150).attr("y1", 250).attr("x2", 600).attr("y2", 200).attr("stroke", "#d63031").attr("stroke-width", 5);
    for (let x = 200; x < 600; x += 60) {
      const y = 250 - (x - 150) * (50 / 450);
      svg.append("circle").attr("cx", x).attr("cy", y).attr("r", 7).attr("fill", "#d63031");
    }
    svg.append("text").attr("x", 100).attr("y", 310).attr("font-size", 18).attr("font-weight", "bold").attr("fill", "#0984e3").text("‚ùÑÔ∏è COOL AIR");
    svg.append("text").attr("x", 100).attr("y", 330).attr("font-size", 13).attr("fill", "#2d3436").text("Retreating slowly");
    svg.append("text").attr("x", 500).attr("y", 120).attr("font-size", 18).attr("font-weight", "bold").attr("fill", "#d63031").text("üî• WARM AIR");
    svg.append("text").attr("x", 500).attr("y", 140).attr("font-size", 13).attr("fill", "#2d3436").text("Slides up gently over cool air");
    svg.append("text").attr("x", 375).attr("y", 380).attr("text-anchor", "middle").attr("font-size", 16).attr("font-weight", "bold")
      .text("WARM FRONT: Warm air slides over cool air ‚Üí gentle slope ‚Üí steady, prolonged rain");
    svg.append("text").attr("x", 250).attr("y", 70).attr("font-size", 25).text("üåßÔ∏è");
    svg.append("text").attr("x", 350).attr("y", 90).attr("font-size", 20).text("üå•Ô∏è");
    svg.append("text").attr("x", 450).attr("y", 100).attr("font-size", 20).text("‚òÅÔ∏è");
  } else if (frontType === "Stationary Front") {
    svg.append("rect").attr("x", 0).attr("y", 200).attr("width", 375).attr("height", 150).attr("fill", "#74b9ff").attr("opacity", 0.5);
    svg.append("rect").attr("x", 375).attr("y", 200).attr("width", 375).attr("height", 150).attr("fill", "#ff7675").attr("opacity", 0.4);
    svg.append("line").attr("x1", 100).attr("y1", 200).attr("x2", 650).attr("y2", 200).attr("stroke", "#6c5ce7").attr("stroke-width", 5);
    for (let x = 130; x < 650; x += 80) {
      svg.append("polygon").attr("points", `${x},200 ${x-8},188 ${x+8},188`).attr("fill", "#0984e3");
      svg.append("circle").attr("cx", x + 40).attr("cy", 212).attr("r", 7).attr("fill", "#d63031");
    }
    svg.append("text").attr("x", 180).attr("y", 280).attr("text-anchor", "middle").attr("font-size", 18).attr("font-weight", "bold").attr("fill", "#0984e3").text("‚ùÑÔ∏è COLD AIR");
    svg.append("text").attr("x", 560).attr("y", 280).attr("text-anchor", "middle").attr("font-size", 18).attr("font-weight", "bold").attr("fill", "#d63031").text("üî• WARM AIR");
    svg.append("text").attr("x", 375).attr("y", 380).attr("text-anchor", "middle").attr("font-size", 16).attr("font-weight", "bold")
      .text("STATIONARY FRONT: Neither air mass advances ‚Üí prolonged rain along boundary");
    svg.append("text").attr("x", 300).attr("y", 160).attr("font-size", 25).text("üåßÔ∏è");
    svg.append("text").attr("x", 400).attr("y", 150).attr("font-size", 25).text("üåßÔ∏è");
  } else {
    svg.append("polygon").attr("points", "0,350 300,350 300,180 0,250").attr("fill", "#74b9ff").attr("opacity", 0.6);
    svg.append("polygon").attr("points", "300,180 300,350 600,350 600,200").attr("fill", "#a29bfe").attr("opacity", 0.5);
    svg.append("polygon").attr("points", "300,180 600,200 600,50 400,30 300,60").attr("fill", "#ff7675").attr("opacity", 0.4);
    svg.append("line").attr("x1", 150).attr("y1", 225).attr("x2", 500).attr("y2", 188).attr("stroke", "#6c5ce7").attr("stroke-width", 5);
    svg.append("text").attr("x", 100).attr("y", 310).attr("font-size", 16).attr("font-weight", "bold").attr("fill", "#0984e3").text("‚ùÑÔ∏è Cold Air (fast)");
    svg.append("text").attr("x", 400).attr("y", 310).attr("font-size", 16).attr("font-weight", "bold").attr("fill", "#6c5ce7").text("ü•∂ Cool Air (slow)");
    svg.append("text").attr("x", 450).attr("y", 100).attr("font-size", 16).attr("font-weight", "bold").attr("fill", "#d63031").text("üî• Warm Air (lifted)");
    svg.append("text").attr("x", 375).attr("y", 380).attr("text-anchor", "middle").attr("font-size", 16).attr("font-weight", "bold")
      .text("OCCLUDED FRONT: Fast cold front catches warm front ‚Üí warm air fully lifted");
    svg.append("text").attr("x", 350).attr("y", 50).attr("font-size", 30).text("‚õàÔ∏è");
  }

  return svg.node();
}
```

::: {.student-task}
### üìù Front Analysis

Use the dropdown above to explore each front type. For each one, answer:

1. Which air mass is advancing?
2. What happens to the warm air?
3. What type of precipitation would you expect (brief and intense, or steady and prolonged)?
4. Which front type is most associated with blizzards?
:::

# Explain: How Do Blizzards Form?

::: {.explain-box}
## üßä Building a Blizzard Model

Now that you understand wind (from pressure differences) and precipitation (from air mass collisions at fronts), let's put it all together to explain how blizzards form.
:::

## The Mid-Latitude Cyclone

Blizzards are produced by powerful **mid-latitude cyclones** ‚Äî large low-pressure systems that form at the boundary between polar and tropical air masses, typically between 30¬∞N and 60¬∞N latitude.

```{ojs}
//| echo: false
viewof cycloneStage = Inputs.range([1, 4], {label: "Cyclone Life Stage", step: 1, value: 1})
```

```{ojs}
//| echo: false
{
  const width = 750;
  const height = 450;
  const svg = d3.create("svg").attr("width", width).attr("height", height).attr("viewBox", `0 0 ${width} ${height}`);
  svg.append("rect").attr("width", width).attr("height", height).attr("fill", "#f0f4ff").attr("rx", 10);

  const stages = [
    {title: "Stage 1: Stationary Front", desc: "A boundary between cold polar air and warm tropical air sits in place. Winds blow in opposite directions on each side."},
    {title: "Stage 2: Wave Development", desc: "A kink develops in the front. Warm air begins to push north while cold air pushes south. A low-pressure center forms at the bend."},
    {title: "Stage 3: Mature Cyclone", desc: "The low deepens. Warm front extends northeast, cold front extends southwest. Counter-clockwise rotation brings heavy precip. This is when blizzard conditions occur!"},
    {title: "Stage 4: Occlusion & Decay", desc: "The cold front catches the warm front, lifting all warm air off the surface. The storm weakens as energy is cut off."}
  ];

  const stage = stages[cycloneStage - 1];
  svg.append("text").attr("x", 375).attr("y", 30).attr("text-anchor", "middle").attr("font-size", 20).attr("font-weight", "bold").text(stage.title);

  const cx = 375, cy = 230;

  if (cycloneStage === 1) {
    // Stationary front
    svg.append("rect").attr("x", 50).attr("y", 60).attr("width", 650).attr("height", 160).attr("fill", "#74b9ff").attr("opacity", 0.3).attr("rx", 8);
    svg.append("rect").attr("x", 50).attr("y", 220).attr("width", 650).attr("height", 160).attr("fill", "#ff7675").attr("opacity", 0.3).attr("rx", 8);
    svg.append("line").attr("x1", 50).attr("y1", 220).attr("x2", 700).attr("y2", 220).attr("stroke", "#6c5ce7").attr("stroke-width", 4);
    svg.append("text").attr("x", 375).attr("y", 150).attr("text-anchor", "middle").attr("font-size", 22).attr("fill", "#0984e3").text("‚ùÑÔ∏è Cold Polar Air (cP) ‚Üí");
    svg.append("text").attr("x", 375).attr("y", 300).attr("text-anchor", "middle").attr("font-size", 22).attr("fill", "#d63031").text("‚Üê üî• Warm Tropical Air (mT)");
  } else if (cycloneStage === 2) {
    svg.append("rect").attr("x", 50).attr("y", 60).attr("width", 650).attr("height", 140).attr("fill", "#74b9ff").attr("opacity", 0.3).attr("rx", 8);
    svg.append("rect").attr("x", 50).attr("y", 250).attr("width", 650).attr("height", 140).attr("fill", "#ff7675").attr("opacity", 0.3).attr("rx", 8);
    svg.append("path").attr("d", "M 100,220 Q 375,140 650,220").attr("stroke", "#0984e3").attr("stroke-width", 3).attr("fill", "none");
    svg.append("path").attr("d", "M 100,220 Q 375,300 650,220").attr("stroke", "#d63031").attr("stroke-width", 3).attr("fill", "none");
    svg.append("circle").attr("cx", 375).attr("cy", 220).attr("r", 20).attr("fill", "none").attr("stroke", "#e74c3c").attr("stroke-width", 3);
    svg.append("text").attr("x", 375).attr("y", 225).attr("text-anchor", "middle").attr("font-size", 16).attr("font-weight", "bold").attr("fill", "#e74c3c").text("L");
    svg.append("text").attr("x", 250).attr("y", 140).attr("text-anchor", "middle").attr("font-size", 16).attr("fill", "#0984e3").text("‚ùÑÔ∏è Cold air pushes south");
    svg.append("text").attr("x", 500).attr("y", 320).attr("text-anchor", "middle").attr("font-size", 16).attr("fill", "#d63031").text("üî• Warm air pushes north");
  } else if (cycloneStage === 3) {
    // Mature cyclone with rotation
    svg.append("circle").attr("cx", cx).attr("cy", cy).attr("r", 100).attr("fill", "none").attr("stroke", "#6c5ce7").attr("stroke-width", 2).attr("stroke-dasharray", "5,3");
    svg.append("circle").attr("cx", cx).attr("cy", cy).attr("r", 25).attr("fill", "#e74c3c").attr("opacity", 0.3);
    svg.append("text").attr("x", cx).attr("y", cy + 7).attr("text-anchor", "middle").attr("font-size", 22).attr("font-weight", "bold").attr("fill", "#e74c3c").text("L");
    // Cold front (trailing SW)
    svg.append("line").attr("x1", cx).attr("y1", cy).attr("x2", cx - 120).attr("y2", cy + 100).attr("stroke", "#0984e3").attr("stroke-width", 4);
    for (let i = 1; i <= 4; i++) {
      const fx = cx - i * 30;
      const fy = cy + i * 25;
      svg.append("polygon").attr("points", `${fx},${fy} ${fx-6},${fy+10} ${fx+6},${fy+10}`).attr("fill", "#0984e3");
    }
    // Warm front (extending NE)
    svg.append("line").attr("x1", cx).attr("y1", cy).attr("x2", cx + 140).attr("y2", cy - 50).attr("stroke", "#d63031").attr("stroke-width", 4);
    for (let i = 1; i <= 5; i++) {
      svg.append("circle").attr("cx", cx + i * 28).attr("cy", cy - i * 10).attr("r", 5).attr("fill", "#d63031");
    }
    // CCW rotation arrow
    svg.append("text").attr("x", cx + 110).attr("y", cy + 10).attr("font-size", 14).attr("fill", "#6c5ce7").text("‚Ü∫ CCW");
    // Labels
    svg.append("text").attr("x", cx - 160).attr("y", cy + 130).attr("font-size", 14).attr("font-weight", "bold").attr("fill", "#0984e3").text("Cold Front");
    svg.append("text").attr("x", cx + 130).attr("y", cy - 70).attr("font-size", 14).attr("font-weight", "bold").attr("fill", "#d63031").text("Warm Front");
    // Blizzard zone
    svg.append("rect").attr("x", cx - 170).attr("y", cy - 80).attr("width", 130).attr("height", 50).attr("fill", "#dfe6e9").attr("rx", 8).attr("stroke", "#2d3436");
    svg.append("text").attr("x", cx - 105).attr("y", cy - 55).attr("text-anchor", "middle").attr("font-size", 13).attr("font-weight", "bold").text("üå®Ô∏è BLIZZARD");
    svg.append("text").attr("x", cx - 105).attr("y", cy - 40).attr("text-anchor", "middle").attr("font-size", 10).text("ZONE");
    // Precipitation zones
    svg.append("text").attr("x", cx + 40).attr("y", cy - 90).attr("font-size", 18).text("üåßÔ∏è");
    svg.append("text").attr("x", cx - 80).attr("y", cy - 30).attr("font-size", 22).text("‚ùÑÔ∏è");
    svg.append("text").attr("x", cx - 40).attr("y", cy + 80).attr("font-size", 18).text("‚õàÔ∏è");
  } else {
    svg.append("circle").attr("cx", cx).attr("cy", cy).attr("r", 80).attr("fill", "none").attr("stroke", "#b2bec3").attr("stroke-width", 2).attr("stroke-dasharray", "3,3");
    svg.append("text").attr("x", cx).attr("y", cy + 7).attr("text-anchor", "middle").attr("font-size", 22).attr("font-weight", "bold").attr("fill", "#b2bec3").text("L");
    svg.append("line").attr("x1", cx - 80).attr("y1", cy + 60).attr("x2", cx + 100).attr("y2", cy - 60).attr("stroke", "#6c5ce7").attr("stroke-width", 4);
    svg.append("text").attr("x", cx).attr("y", cy + 120).attr("text-anchor", "middle").attr("font-size", 14).attr("fill", "#636e72").text("Occluded front ‚Äî warm air fully lifted");
    svg.append("text").attr("x", cx).attr("y", cy + 145).attr("text-anchor", "middle").attr("font-size", 14).attr("fill", "#636e72").text("Storm loses energy source and dissipates");
    svg.append("text").attr("x", cx).attr("y", cy - 100).attr("text-anchor", "middle").attr("font-size", 30).text("‚òÅÔ∏è");
  }

  // Description
  svg.append("foreignObject").attr("x", 50).attr("y", 380).attr("width", 650).attr("height", 60)
    .append("xhtml:div").style("font-size", "13px").style("text-align", "center").style("color", "#2d3436")
    .text(stage.desc);

  return svg.node();
}
```

::: {.key-idea}
### üí° Key Concept: Mid-Latitude Cyclone ‚Üí Blizzard

A blizzard is a severe mid-latitude cyclone that produces:

- **Heavy snow** (reduces visibility to less than ¬º mile)
- **Strong winds** (sustained 35+ mph for 3+ hours)
- **Cold temperatures** (usually below 20¬∞F)

These conditions occur on the **cold side** of the low-pressure center (north and west of the center in the Northern Hemisphere), where cold, dry polar air wraps around the system and collides with moist air being lifted along the fronts.
:::

## Reading Weather Maps

Meteorologists use **surface analysis maps** to track air masses, fronts, and pressure systems. Understanding these maps is key to predicting blizzards.

::: {.weather-map-note}
### üó∫Ô∏è Weather Map Symbols

| Symbol | Meaning |
|--------|---------|
| **L** (red) | Low-pressure center ‚Äî rising air, clouds, precipitation |
| **H** (blue) | High-pressure center ‚Äî sinking air, clear skies |
| Blue line with triangles ‚ñ≤ | Cold front (triangles point in direction of movement) |
| Red line with semicircles ‚¶ø | Warm front (semicircles point in direction of movement) |
| Alternating blue/red | Stationary front |
| Purple line with both | Occluded front |
| Concentric circles | Isobars ‚Äî lines of equal pressure (closer = stronger wind) |
:::

::: {.lab-activity}
### üî¨ Lab Activity: Track Winter Storm Jonas

Using the NOAA Weather Prediction Center's archived surface analysis maps:

1. Find surface analysis maps for **January 21‚Äì24, 2016**
2. For each day, identify:
   - Location of the low-pressure center
   - Types of fronts present
   - Which air masses are interacting
   - Where precipitation is falling
3. Create a **timeline** showing how the storm developed, reached peak intensity, and dissipated
4. Compare the storm's lifecycle to the mid-latitude cyclone stages above

**Resources:** [NOAA Weather Prediction Center Archive](https://www.wpc.ncep.noaa.gov/dailywxmap/)
:::

# Explain: Precipitation ‚Äî Where Does Snow Come From?

::: {.explain-box}
## üíß From Water Vapor to Snowflakes

Understanding precipitation requires connecting energy, water, and air movement. Let's trace the journey from evaporation to snowfall.
:::

## The Precipitation Process

```{ojs}
//| echo: false
{
  const width = 750;
  const height = 500;
  const svg = d3.create("svg").attr("width", width).attr("height", height).attr("viewBox", `0 0 ${width} ${height}`);

  svg.append("rect").attr("width", width).attr("height", height).attr("fill", "#e8f4fd").attr("rx", 10);
  svg.append("text").attr("x", 375).attr("y", 30).attr("text-anchor", "middle").attr("font-size", 20).attr("font-weight", "bold").text("How Precipitation Forms at a Front");

  // Ground
  svg.append("rect").attr("x", 0).attr("y", 420).attr("width", 375).attr("height", 80).attr("fill", "#ff7675").attr("opacity", 0.3);
  svg.append("rect").attr("x", 375).attr("y", 420).attr("width", 375).attr("height", 80).attr("fill", "#74b9ff").attr("opacity", 0.3);
  svg.append("text").attr("x", 190).attr("y", 460).attr("text-anchor", "middle").attr("font-size", 14).attr("font-weight", "bold").attr("fill", "#d63031").text("Warm Surface (mT air)");
  svg.append("text").attr("x", 560).attr("y", 460).attr("text-anchor", "middle").attr("font-size", 14).attr("font-weight", "bold").attr("fill", "#0984e3").text("Cold Surface (cP air)");

  // Steps with arrows
  const steps = [
    {x: 120, y: 390, num: "‚ë†", text: "Warm, moist air holds\nlots of water vapor", color: "#d63031"},
    {x: 120, y: 300, num: "‚ë°", text: "Warm air is forced UP\nat the front boundary", color: "#e17055"},
    {x: 280, y: 200, num: "‚ë¢", text: "Rising air COOLS\n(adiabatic cooling)", color: "#6c5ce7"},
    {x: 430, y: 120, num: "‚ë£", text: "Cool air can't hold as\nmuch moisture ‚Üí CONDENSATION", color: "#0984e3"},
    {x: 550, y: 60, num: "‚ë§", text: "Water droplets form clouds;\nif cold enough ‚Üí ICE CRYSTALS", color: "#00b894"},
    {x: 550, y: 300, num: "‚ë•", text: "Crystals grow heavy\nand FALL as snow ‚ùÑÔ∏è", color: "#2d3436"}
  ];

  steps.forEach(s => {
    svg.append("circle").attr("cx", s.x - 30).attr("cy", s.y).attr("r", 18).attr("fill", s.color).attr("opacity", 0.2);
    svg.append("text").attr("x", s.x - 30).attr("y", s.y + 6).attr("text-anchor", "middle").attr("font-size", 18).attr("font-weight", "bold").attr("fill", s.color).text(s.num);
    const lines = s.text.split("\n");
    lines.forEach((line, i) => {
      svg.append("text").attr("x", s.x + 10).attr("y", s.y - 5 + i * 16).attr("font-size", 13).attr("fill", "#2d3436").text(line);
    });
  });

  // Rising air arrow
  svg.append("path").attr("d", "M 150,380 Q 200,280 350,180 Q 450,100 550,70")
    .attr("stroke", "#e17055").attr("stroke-width", 3).attr("fill", "none").attr("stroke-dasharray", "8,4");

  // Falling snow
  for (let i = 0; i < 8; i++) {
    svg.append("text").attr("x", 520 + Math.random() * 100).attr("y", 200 + Math.random() * 180).attr("font-size", 16).text("‚ùÑÔ∏è");
  }

  // Front line
  svg.append("line").attr("x1", 375).attr("y1", 420).attr("x2", 375).attr("y2", 200).attr("stroke", "#6c5ce7").attr("stroke-width", 3).attr("stroke-dasharray", "5,3");
  svg.append("text").attr("x", 380).attr("y", 195).attr("font-size", 12).attr("fill", "#6c5ce7").text("FRONT");

  return svg.node();
}
```

::: {.key-idea}
### üí° Key Concept: Why Fronts Produce Precipitation

1. **Warm, moist air** (often from the Gulf of Mexico) contains lots of **water vapor**
2. At a front, this warm air is **forced upward** over cold air
3. As air rises, it **cools** (because atmospheric pressure decreases with altitude)
4. Cool air holds **less water vapor** than warm air
5. Excess moisture **condenses** into water droplets or **freezes** into ice crystals
6. When crystals grow heavy enough, they fall as **snow** (if temperatures remain below freezing all the way to the ground)
:::

::: {.mind-blown}
‚ùÑÔ∏è A single mid-latitude cyclone can lift BILLIONS of tons of moist air, producing enough snow to bury an entire state! ‚ùÑÔ∏è
:::

# Elaborate: Blizzards & Climate Change

::: {.elaborate-box}
## üå°Ô∏è Will Blizzards Get Worse in a Warming World?

This might seem like a contradiction ‚Äî how can global warming lead to bigger snowstorms? Let's investigate with data.
:::

## The Paradox: More Warming ‚Üí More Snow?

It sounds counterintuitive, but a warmer atmosphere can actually fuel more intense winter storms in some regions. Here's why:

```{ojs}
//| echo: false
viewof showMechanism = Inputs.radio(
  ["Warmer = More Moisture", "Arctic Amplification", "Both Together"],
  {label: "Explore the mechanism:", value: "Warmer = More Moisture"}
)
```

```{ojs}
//| echo: false
{
  const width = 750;
  const height = 400;
  const svg = d3.create("svg").attr("width", width).attr("height", height).attr("viewBox", `0 0 ${width} ${height}`);

  svg.append("rect").attr("width", width).attr("height", height).attr("fill", "#f8f9fa").attr("rx", 10);

  if (showMechanism === "Warmer = More Moisture") {
    svg.append("text").attr("x", 375).attr("y", 35).attr("text-anchor", "middle").attr("font-size", 18).attr("font-weight", "bold").text("üå°Ô∏è Warmer Air Holds More Water Vapor");
    // Clausius-Clapeyron: ~7% more moisture per 1¬∞C warming
    const tempData = d3.range(-10, 35, 1).map(t => ({temp: t, moisture: 3.5 * Math.exp(0.07 * (t + 10))}));
    // Simple bar-style chart
    const xScale = d3.scaleLinear().domain([-10, 34]).range([80, 700]);
    const yScale = d3.scaleLinear().domain([0, 30]).range([350, 60]);
    // Axes
    svg.append("line").attr("x1", 80).attr("y1", 350).attr("x2", 700).attr("y2", 350).attr("stroke", "#2d3436");
    svg.append("line").attr("x1", 80).attr("y1", 60).attr("x2", 80).attr("y2", 350).attr("stroke", "#2d3436");
    svg.append("text").attr("x", 390).attr("y", 390).attr("text-anchor", "middle").attr("font-size", 13).text("Temperature (¬∞C)");
    svg.append("text").attr("x", 30).attr("y", 200).attr("text-anchor", "middle").attr("font-size", 12).attr("transform", "rotate(-90, 30, 200)").text("Max Moisture (g/kg)");
    // Curve
    svg.append("path").attr("d", d3.line().x(d => xScale(d.temp)).y(d => yScale(d.moisture)).curve(d3.curveBasis)(tempData))
      .attr("stroke", "#e74c3c").attr("stroke-width", 3).attr("fill", "none");
    // Annotation
    svg.append("rect").attr("x", 400).attr("y", 80).attr("width", 280).attr("height", 90).attr("fill", "#fff3e0").attr("rx", 8);
    svg.append("text").attr("x", 540).attr("y", 105).attr("text-anchor", "middle").attr("font-size", 13).attr("font-weight", "bold").text("Clausius-Clapeyron Relation:");
    svg.append("text").attr("x", 540).attr("y", 125).attr("text-anchor", "middle").attr("font-size", 12).text("For every 1¬∞C of warming, air can");
    svg.append("text").attr("x", 540).attr("y", 145).attr("text-anchor", "middle").attr("font-size", 13).attr("font-weight", "bold").attr("fill", "#e74c3c").text("hold ~7% more water vapor");
    svg.append("text").attr("x", 540).attr("y", 162).attr("text-anchor", "middle").attr("font-size", 12).text("‚Üí More fuel for storms!");
  } else if (showMechanism === "Arctic Amplification") {
    svg.append("text").attr("x", 375).attr("y", 35).attr("text-anchor", "middle").attr("font-size", 18).attr("font-weight", "bold").text("üßä Arctic Amplification & the Jet Stream");
    // Simplified diagram
    svg.append("rect").attr("x", 50).attr("y", 60).attr("width", 650).attr("height", 130).attr("fill", "#dfe6e9").attr("rx", 8);
    svg.append("text").attr("x", 375).attr("y", 90).attr("text-anchor", "middle").attr("font-size", 14).attr("font-weight", "bold").text("BEFORE: Strong temperature gradient ‚Üí Tight, fast jet stream");
    svg.append("path").attr("d", "M 80,150 Q 200,130 300,150 Q 400,170 500,150 Q 600,130 680,150")
      .attr("stroke", "#0984e3").attr("stroke-width", 4).attr("fill", "none");
    svg.append("text").attr("x", 100).attr("y", 180).attr("font-size", 12).attr("fill", "#0984e3").text("Jet stream stays mostly straight ‚Üí storms track predictably");

    svg.append("rect").attr("x", 50).attr("y", 220).attr("width", 650).attr("height", 150).attr("fill", "#ffeaa7").attr("rx", 8);
    svg.append("text").attr("x", 375).attr("y", 250).attr("text-anchor", "middle").attr("font-size", 14).attr("font-weight", "bold").text("AFTER: Reduced gradient ‚Üí Wavy, slow jet stream");
    svg.append("path").attr("d", "M 80,310 Q 160,260 240,320 Q 320,380 400,300 Q 480,220 560,320 Q 640,370 680,310")
      .attr("stroke", "#e74c3c").attr("stroke-width", 4).attr("fill", "none");
    svg.append("text").attr("x", 100).attr("y", 360).attr("font-size", 12).attr("fill", "#e74c3c").text("Jet stream develops deep waves ‚Üí cold air plunges south, storms stall");
  } else {
    svg.append("text").attr("x", 375).attr("y", 35).attr("text-anchor", "middle").attr("font-size", 18).attr("font-weight", "bold").text("üå®Ô∏è Combined Effect: More Intense Blizzards");

    const boxes = [
      {x: 50, y: 60, w: 300, h: 80, color: "#e74c3c", text: "üå°Ô∏è Warmer atmosphere\nholds ~7% more moisture per ¬∞C"},
      {x: 400, y: 60, w: 300, h: 80, color: "#0984e3", text: "üßä Arctic warming weakens\njet stream ‚Üí deeper troughs"},
      {x: 150, y: 180, w: 450, h: 60, color: "#6c5ce7", text: "When deep cold outbreaks meet extra-moist air..."},
      {x: 100, y: 280, w: 550, h: 90, color: "#2d3436", text: "‚õàÔ∏è RESULT: Potentially MORE INTENSE blizzards\neven as average winters get milder\n(fewer but stronger storms)"}
    ];

    boxes.forEach(b => {
      svg.append("rect").attr("x", b.x).attr("y", b.y).attr("width", b.w).attr("height", b.h)
        .attr("fill", b.color).attr("opacity", 0.15).attr("rx", 10).attr("stroke", b.color).attr("stroke-width", 2);
      const lines = b.text.split("\n");
      lines.forEach((line, i) => {
        svg.append("text").attr("x", b.x + b.w/2).attr("y", b.y + 25 + i * 20).attr("text-anchor", "middle")
          .attr("font-size", 13).attr("font-weight", i === 0 ? "bold" : "normal").text(line);
      });
    });
    // Connecting arrows
    svg.append("line").attr("x1", 200).attr("y1", 140).attr("x2", 300).attr("y2", 180).attr("stroke", "#636e72").attr("stroke-width", 2);
    svg.append("line").attr("x1", 550).attr("y1", 140).attr("x2", 450).attr("y2", 180).attr("stroke", "#636e72").attr("stroke-width", 2);
    svg.append("line").attr("x1", 375).attr("y1", 240).attr("x2", 375).attr("y2", 280).attr("stroke", "#636e72").attr("stroke-width", 2);
  }

  return svg.node();
}
```

## Snowfall Trends: The Data

```{ojs}
//| echo: false
// Extreme snowfall events in the US Northeast (simplified data)
snowData = [
  {decade: "1960s", extremeEvents: 3, avgSnowfall: 58},
  {decade: "1970s", extremeEvents: 4, avgSnowfall: 62},
  {decade: "1980s", extremeEvents: 3, avgSnowfall: 55},
  {decade: "1990s", extremeEvents: 5, avgSnowfall: 52},
  {decade: "2000s", extremeEvents: 6, avgSnowfall: 48},
  {decade: "2010s", extremeEvents: 8, avgSnowfall: 45},
  {decade: "2020s*", extremeEvents: 4, avgSnowfall: 42}
]

Plot.plot({
  title: "Northeast US: Extreme Snowfall Events vs. Average Annual Snowfall",
  subtitle: "More extreme events even as average snowfall decreases",
  width: 700,
  height: 350,
  x: {label: "Decade", padding: 0.3},
  y: {label: "Count / Inches"},
  color: {legend: true},
  marks: [
    Plot.barY(snowData, {x: "decade", y: "extremeEvents", fill: "#3498db", title: d => `${d.extremeEvents} extreme events`,
        tip: true}),
    Plot.dot(snowData, {x: "decade", y: "avgSnowfall", fill: "#e74c3c", r: 8,
        tip: true}),
    Plot.line(snowData, {x: "decade", y: "avgSnowfall", stroke: "#e74c3c", strokeWidth: 2,
        tip: true}),
    Plot.text([{x: "2020s*", y: 48}], {x: "x", y: "y", text: d => "üî¥ Avg Annual Snowfall (inches)", dx: -80, fill: "#e74c3c", fontSize: 11}),
    Plot.text([{x: "2020s*", y: 7}], {x: "x", y: "y", text: d => "üîµ Extreme events per decade", dx: -80, fill: "#3498db", fontSize: 11})
  ]
})
```

::: {.student-task}
### üìù Analyze the Paradox

1. Describe the trend in **extreme snowfall events** over time.
2. Describe the trend in **average annual snowfall** over time.
3. How can both trends exist simultaneously? Use what you've learned about atmospheric moisture and the jet stream.
4. Connect this back to Winter Storm Jonas ‚Äî what conditions made it possible?
:::

# Evaluate: Putting It All Together

::: {.evaluate-box}
## ‚úÖ Assessment: Build Your Blizzard Model

You now have all the pieces to explain how blizzards form and how they may change with climate change. Let's check your understanding!
:::

::: {.quiz-section}
### üß† Check Your Understanding

**Question 1:** What is the fundamental cause of wind?

```{ojs}
//| echo: false
viewof q1_blizzard = Inputs.radio(
  ["Temperature differences between the surface and upper atmosphere",
   "Pressure differences caused by uneven heating of Earth's surface",
   "The rotation of the Earth on its axis",
   "Evaporation of water from the ocean"],
  {label: "Select the best answer:"}
)
```

```{ojs}
//| echo: false
q1_blizzard === "Pressure differences caused by uneven heating of Earth's surface" ? 
  html`<div style="background: #d4edda; padding: 12px; border-radius: 8px; border-left: 4px solid #28a745;">‚úÖ <strong>Correct!</strong> Uneven heating creates temperature differences, which create pressure differences. Air flows from high to low pressure ‚Äî that's wind!</div>` :
  q1_blizzard ? html`<div style="background: #f8d7da; padding: 12px; border-radius: 8px; border-left: 4px solid #dc3545;">‚ùå Not quite. Think about the causal chain: uneven heating ‚Üí temperature differences ‚Üí pressure differences ‚Üí wind.</div>` : html``
```

**Question 2:** In a mid-latitude cyclone, blizzard conditions (heavy snow, high winds) are most likely found:

```{ojs}
//| echo: false
viewof q2_blizzard = Inputs.radio(
  ["Ahead of the warm front (east/northeast of the low center)",
   "Behind the cold front (north/west of the low center)",
   "At the exact center of the low-pressure system",
   "Far away from all fronts in the warm sector"],
  {label: "Select the best answer:"}
)
```

```{ojs}
//| echo: false
q2_blizzard === "Behind the cold front (north/west of the low center)" ? 
  html`<div style="background: #d4edda; padding: 12px; border-radius: 8px; border-left: 4px solid #28a745;">‚úÖ <strong>Correct!</strong> The north/west side of the cyclone has cold air wrapping around the system, strong pressure gradients (= high winds), and moisture being lifted along the fronts ‚Äî the recipe for blizzard conditions.</div>` :
  q2_blizzard ? html`<div style="background: #f8d7da; padding: 12px; border-radius: 8px; border-left: 4px solid #dc3545;">‚ùå Think about where cold air and moisture overlap. Blizzard conditions need both heavy precipitation AND cold temperatures.</div>` : html``
```

**Question 3:** How can climate change lead to more intense blizzards even as average temperatures rise?

```{ojs}
//| echo: false
viewof q3_blizzard = Inputs.radio(
  ["Climate change has no effect on blizzards",
   "Warmer air holds more moisture, providing more fuel; weakened jet stream allows cold outbreaks",
   "Climate change only makes hurricanes worse, not blizzards",
   "Blizzards are caused by the Sun, not greenhouse gases"],
  {label: "Select the best answer:"}
)
```

```{ojs}
//| echo: false
q3_blizzard === "Warmer air holds more moisture, providing more fuel; weakened jet stream allows cold outbreaks" ? 
  html`<div style="background: #d4edda; padding: 12px; border-radius: 8px; border-left: 4px solid #28a745;">‚úÖ <strong>Excellent!</strong> The Clausius-Clapeyron relation means ~7% more moisture per ¬∞C of warming. When deep cold outbreaks (from a weakened jet stream) meet this extra moisture, the result can be more intense snowfall events.</div>` :
  q3_blizzard ? html`<div style="background: #f8d7da; padding: 12px; border-radius: 8px; border-left: 4px solid #dc3545;">‚ùå Think about two mechanisms: (1) more moisture in a warmer atmosphere, and (2) Arctic amplification weakening the jet stream.</div>` : html``
```
:::

::: {.lab-activity}
### üìù Culminating Task: Blizzard Explanation Model

In your notebook, create a **visual model** (diagram + written explanation) that answers:

**"How did Winter Storm Jonas produce strong enough winds and enough snow to cause significant disruptions?"**

Your model should include:
1. The **air masses** that interacted (with sources and properties)
2. The **fronts** that formed and how they caused precipitation
3. The **mid-latitude cyclone** structure and how it generated strong winds
4. An explanation of the **energy source** driving the storm
5. A **claim** about whether storms like Jonas could become more common, supported by evidence about atmospheric moisture and jet stream changes

Use the vocabulary: *pressure gradient, air mass, front, mid-latitude cyclone, adiabatic cooling, condensation, Clausius-Clapeyron, Arctic amplification*
:::

# Summary: Key Takeaways

| Concept | Key Idea |
|---------|----------|
| **Wind** | Caused by pressure differences from uneven heating |
| **Air Masses** | Large bodies of air with uniform temp & humidity |
| **Fronts** | Boundaries between air masses; where weather happens |
| **Mid-Latitude Cyclone** | Low-pressure system with warm & cold fronts; produces blizzards |
| **Precipitation** | Warm moist air rises at front ‚Üí cools ‚Üí condenses ‚Üí snow/rain |
| **Climate Connection** | Warmer air holds more moisture + weakened jet stream = potentially more intense blizzards |

**Next up:** We'll investigate **why storms follow the paths they do** ‚Äî and whether those paths are changing. üó∫Ô∏è
